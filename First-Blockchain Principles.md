# 区块链的结构介绍

**区块链的整体结构可以看作是计算器里面的有序链表结构**；也就是有一个头节点+后面的数据节点；并且每一个数据节点可以看成两部分：数据本身+指向前一个区块的指针。那在区块链中，这三个名词的理解可以是这样的：头节点，也就这个区块链的创世区块；
数据本身：也就是区块链中的交易本身；指向前一个区块的指针：区块链中每个区块的Merkle hash值。

**区块链就是一个不断增长的包含全网交易记录的总帐本**；因为自身特性（后面介绍），所以每个节点（全网每个人手中）都有一个完整的区块链，并且，**每个节点总是信任全网中最长的区块链**；并且因为Hash算法的特性（本章节最后会介绍），导致区块链的一个重要特性就是不可篡改的特性！！！
每个区块会有三个Hash值：**Block Hash**（区块Hash，当前区块自身的Hash值）、**Prev Hash**（当前区块的前面一个区块的区块Hash，也就是上个区块的Block Hash）、**Merkle Hash**（用于确保当前区块的所有交易的Hash）。



# 区块链的三个Hash介绍
**Block Hash：** 首先明白一点，Block Hash（区块Hash）并没有记录在头部，而是需要通过**计算区块头部的Hash**才能得到的，只需要计算头部！！！
<br>**Prev Hash：** 这个**是实际记录的Hash值，是记录在该区块的头部**。因为这个Prev Hash是记录上一个区块的区块Hash，所以可以理解当前区块是指向前一个区块；每个区块都是如此，那么这就形成一个链表。创世区块（该区块链）的第一个区块的Prev Hash就是被设置为00000...000！
<br>**Merkle Hash：** 这个Hash计算了当前区块整个的交易记录。

**Merkle Hash 保证了当前区块的不可篡改的特性；而 Prev Hash + P2P网络的特性 保证了整个区块链的不可篡改的特性**！！！

假如，我想要对区块链作假，那么你需要做到以下操作：首先你需要找一个想要作假的区块A，第一步：然后修改区块A中间的某个交易记录；第二步：你需要计算当前区块的Merkle Hash；第三步：你需要计算整个区块的Prev Hash；第四步：你又需要对当前区块的后续的每个区块依次计算并
修改它的Prev Hash，做完后续所有的Prev Hash你该能算作假完这个交易记录。在后续的了解中，你会知道，修改一个区块的成本就已经非常非常高了，而想要修改后续所有的区块，那么就非常非常的困难。因为挖矿的原因，参加区块链的全网的计算机都在计算新的一个区块的诞生；
所以你想要修改之前的一个，并且修改后续所有的区块，你的计算机至少要超过全网计算机算力的百分之五十一才能够实现！！！而且，区块链在不断的增长，同样一个区块，修改它的难度会随着时间的推移而不断增加！！！



# Hash 算法
Hash算法是一种常用的数学加密算法，又称散列算法。它是一个**单向的函数，可以把任意长度的输入数据转化为固定长度的输出数据**。函数可以这么写 `h = H(x)`。比如 `H("morning") = c7c3169c21f1d92e9577871831d067c8`或者`H("你好") = 7eca689f0d3389d9dea66ae112e5cfd7`等。
如果给你morning，你可以算出这个hash值，但是如果给你hash值，你是算不出你是对morning这个单词进行加密的。所以我们可以这样想，**如果给定我们两个相同的Hash值，那么我们可以默认这两个Hash的输入一定是相同的**！！！如果你想通过Hash值去逆推Hash的输入，那么只能通过暴力求解，也就是一个一个试。

因为是把任意长度的输入数据，转化为固定长度的输出数据，所以Hash函数存在一个特性，那就是会发生**哈希碰撞**，意思就是**可能会有不同的两个数据会得到同样的Hash值**。那么一个好的Hash函数的评判标准就是，如果这个Hash碰撞发生的概率越低，
那么这个Hash函数的效果就会越好。所以我们有这样一个想法，**如果Hash的输出的可能性越多，是不是Hash碰撞发生的概率就越低？这个想法是对的**。

常用的Hash算法：
| 哈希算法 | 输出长度(bit) | 输出长度(字节) |
| --- | --- | --- |
|MD5|128 bit|16 bytes|
|RipeMD160|160 bits|20 bytes|
|SHA-1|160 bits|20 bytes|
|SHA-256|256 bits|32 bytes|
|SHA-512|512 bits|64 bytes|

比特币常用的Hash算法就是：Hash 256和RipeMD160，就拿Hash256来说，尝试2的130次方个随机输入，有百分之99.8%的碰撞概率，什么意思，2的130次方相当于1361万亿亿亿亿，你如果想要去破解这个Hash值所对的输入，那么计算机时很难在短时间内处理出来！所以这也保证了你Merkle Hash的不可篡改的特性



以上就是对区块链原理的介绍！！！
